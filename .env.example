# =====================================
# SUPABASE CONFIGURATION
# =====================================

# Supabase Project URL
SUPABASE_URL=https://yzhqgoofrxixndfcfucz.supabase.co

# Supabase Service Role Key (Backend only - NEVER expose in frontend)
SUPABASE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl6aHFnb29mcnhpeG5kZmNmdWN6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0MDU2OTcxNSwiZXhwIjoyMDU2MTQ1NzE1fQ.kwGOxzH3OGAgx3LXlkgV-Uhq6XyMzls940QQacO70VI
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl6aHFnb29mcnhpeG5kZmNmdWN6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc0MDU2OTcxNSwiZXhwIjoyMDU2MTQ1NzE1fQ.kwGOxzH3OGAgx3LXlkgV-Uhq6XyMzls940QQacO70VI

# Direct PostgreSQL Connection (for advanced use cases)
DATABASE_URL=postgresql://postgres.yzhqgoofrxixndfcfucz:8PrqjzQegAgFHnM4@aws-0-sa-east-1.pooler.supabase.com:5432/postgres?sslmode=require&search_path=monitoring_options_operations

# Database Connection Details
DB_HOST=aws-0-sa-east-1.pooler.supabase.com
DB_PORT=5432
DB_NAME=postgres
DB_USER=postgres.yzhqgoofrxixndfcfucz
DB_PASSWORD=8PrqjzQegAgFHnM4
DB_SCHEMA=monitoring_options_operations
DB_SSL_MODE=require
DB_POOL_MIN=2
DB_POOL_MAX=10

# =====================================
# COMMUNICATIONS API CONFIGURATION
# =====================================

# CommunicationsAPI Base URL
COMM_API_URL=https://api.communications.com

# CommunicationsAPI API Key (Bearer token for authentication)
COMM_API_KEY=your_api_key_here

# CommunicationsAPI Credentials (alternative authentication method)
COMM_CLIENT_ID=a4876b9d-8ce5-4b67-ab69-c04073ce2f80
COMM_EMAIL=admin@test.com
COMM_PASSWORD=123456

# =====================================
# APPLICATION CONFIGURATION
# =====================================

# Environment (development, staging, production)
ENV=development

# Debug Mode (true/false)
DEBUG=true

# Server Configuration
HOST=0.0.0.0
PORT=8000

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# =====================================
# WORKER CONFIGURATION
# =====================================

# Monitoring Worker - Interval in minutes to check positions and rules
MONITOR_INTERVAL_MINUTES=5

# Notifier Worker - Interval in seconds to process alerts queue
NOTIFIER_INTERVAL_SECONDS=30

# Maximum retry attempts for failed notifications
MAX_NOTIFICATION_RETRIES=3

# =====================================
# RULES ENGINE CONFIGURATION
# =====================================

# Default Delta threshold for alerts
DEFAULT_DELTA_THRESHOLD=0.60

# Default DTE (Days to Expiration) range
DEFAULT_DTE_MIN=3
DEFAULT_DTE_MAX=5

# Default market data thresholds
DEFAULT_MIN_VOLUME=1000
DEFAULT_MAX_SPREAD=0.05
DEFAULT_MIN_OI=5000

# =====================================
# LOGGING CONFIGURATION
# =====================================

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log Format
LOG_FORMAT=json

# =====================================
# API DOCUMENTATION
# =====================================

# Enable API documentation (true/false)
ENABLE_DOCS=true

# API Title
API_TITLE=Monitoring Options API

# API Version
API_VERSION=1.0.0

# =====================================
# RATE LIMITING
# =====================================

# Rate limit for notification endpoints (requests per minute)
NOTIFY_RATE_LIMIT=10

# Rate limit for general API endpoints (requests per minute)
API_RATE_LIMIT=100

# =====================================
# SECURITY
# =====================================

# JWT Secret (for additional backend tokens if needed)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Session timeout in minutes
SESSION_TIMEOUT=60

# =====================================
# MARKET DATA CONFIGURATION
# =====================================

# Market data provider (mock, brapi, mt5, hybrid)
# - mock: Fake data for testing
# - brapi: Brazilian market data API (brapi.dev)
# - mt5: MetaTrader 5 only (strict mode)
# - hybrid: MT5 first, fallback to brapi (RECOMMENDED)
MARKET_DATA_PROVIDER=hybrid

# Fallback provider when using hybrid mode
MARKET_DATA_HYBRID_FALLBACK=brapi

# Market data API key (if using external provider)
MARKET_DATA_API_KEY=

# Market data refresh interval in seconds
MARKET_DATA_REFRESH_INTERVAL=60

# =====================================
# MT5 BRIDGE CONFIGURATION
# =====================================

# Enable/disable MT5 Bridge
MT5_BRIDGE_ENABLED=true

# Authentication token for MT5 Bridge (CHANGE THIS!)
# Generate a strong token: python -c "import secrets; print(secrets.token_urlsafe(32))"
MT5_BRIDGE_TOKEN=CHANGE-ME-SET-A-STRONG-TOKEN-HERE

# Allowed IPs (comma separated, empty = allow all)
# Example: MT5_BRIDGE_ALLOWED_IPS=127.0.0.1,192.168.1.100
MT5_BRIDGE_ALLOWED_IPS=

# Quote TTL in seconds (how long quotes are valid)
MT5_BRIDGE_QUOTE_TTL_SECONDS=10

# Command TTL in seconds (for Phase 3)
MT5_BRIDGE_COMMAND_TTL_SECONDS=60
